(this["webpackJsonpweek-1"]=this["webpackJsonpweek-1"]||[]).push([[0],{93:function(e,t,n){"use strict";n.r(t);var o=n(1),r=n.n(o),i=n(36),s=n.n(i),a=n(16),c=n(3),d=Object(c.a)(["*{outline:none;box-sizing:border-box;padding:0;margin:0;}html,body{font-family:'Helvetica Neue',Arial,Helvetica,sans-serif,Arial,Helvetica,sans-serif;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;background-color:#FFF;color:#000;font-size:1rem;}"]),l=n(5),m=n(41),p=n(19),u=c.b.nav.withConfig({displayName:"StyledComponents__Root",componentId:"sc-d3852j-0"})(["height:4rem;width:100vw;background-color:#EFEFEF;display:flex;align-items:center;padding:0 1rem;box-shadow:0 2px 4px 0 rgba(0,0,0,.2);"]),b=Object(c.b)(a.b).withConfig({displayName:"StyledComponents__LogoContainer",componentId:"sc-d3852j-1"})(["text-decoration:none;color:rgba(0,0,0,0.7);justify-self:flex-start;display:flex;align-items:center;cursor:pointer;transition:color 0.2s;&:hover{color:rgba(0,0,0,1);}"]),h=c.b.p.withConfig({displayName:"StyledComponents__LogoText",componentId:"sc-d3852j-2"})(["font-size:1.5rem;"]),f=Object(c.b)(a.b).withConfig({displayName:"StyledComponents__UserContainer",componentId:"sc-d3852j-3"})(["text-decoration:none;margin-left:auto;cursor:pointer;"]),g=Object(c.b)(m.a).withConfig({displayName:"StyledComponents__LightningIcon",componentId:"sc-d3852j-4"})(["margin-right:0.5rem;width:1.5rem;height:1.5rem;"]),j=Object(c.b)(p.b).withConfig({displayName:"StyledComponents__UserIcon",componentId:"sc-d3852j-5"})(["color:rgba(0,0,0,0.7);width:2rem;height:2rem;transition:color 0.2s;&:hover{color:rgba(0,0,0,1);}"]),x=n(2),v=function(){return Object(x.jsxs)(u,{children:[Object(x.jsxs)(b,{to:"/",children:[Object(x.jsx)(g,{}),Object(x.jsx)(h,{children:"All Pics"})]}),Object(x.jsx)(f,{to:"/profile",children:Object(x.jsx)(j,{})})]})},O=n(7),y=n.n(O),w=n(14),C=n(8),_=c.b.div.withConfig({displayName:"StyledComponents__Wrapper",componentId:"sc-zz2v7d-0"})(["position:relative;display:flex;width:100%;height:2.25rem;"]),S=Object(c.b)(p.a).withConfig({displayName:"StyledComponents__SearchIcon",componentId:"sc-zz2v7d-1"})(["position:absolute;top:0.5rem;left:0.5rem;width:1.25rem;height:1.25rem;"]),k=c.b.input.withConfig({displayName:"StyledComponents__Input",componentId:"sc-zz2v7d-2"})(["width:100%;height:100%;border:1px solid grey;border-radius:5px;padding:2px 1.5rem 2px 2rem;outline:0;background-color:#fafafa;&:hover,&:focus{background-color:#FFF;}"]),I=function(e){var t=e.onSearch;return Object(x.jsxs)(_,{children:[Object(x.jsx)(S,{}),Object(x.jsx)(k,{onChange:t,type:"text",placeholder:"Search"})]})},N=n(13),L=n(44),z=n(42),F=c.b.div.withConfig({displayName:"StyledComponents__Root",componentId:"sc-1w3z2v3-0"})(["color:#FFF;background-color:#d64b50;height:1.75rem;max-width:3rem;border-radius:2px;display:flex;align-items:center;justify-content:center;padding:0 0.2rem;cursor:pointer;transition:transform 0.2s;&:active{transform:scale(1.1);}"]),D=Object(c.b)(z.a).withConfig({displayName:"StyledComponents__HeartIcon",componentId:"sc-1w3z2v3-1"})(["font-size:1rem;margin-right:0.15rem;"]),E=c.b.p.withConfig({displayName:"StyledComponents__Count",componentId:"sc-1w3z2v3-2"})(["user-select:none;font-size:0.75rem;"]),q=function(e){var t=e.likes;return Object(x.jsxs)(F,{children:[Object(x.jsx)(D,{}),Object(x.jsx)(E,{children:t})]})},P=c.b.div.withConfig({displayName:"StyledComponents__Root",componentId:"sc-avd1hf-0"})(["background:#fff;height:23rem;border:none;border-radius:8px;overflow:hidden;box-shadow:4px 4px 6px rgba(0,0,0,0.15);transition:transform 0.2s ease-in;&:hover{transform:scale(1.05);z-index:100;}"]),U=c.b.div.withConfig({displayName:"StyledComponents__PostInfoContainer",componentId:"sc-avd1hf-1"})(["padding:0.75rem;position:relative;height:11rem;"]),A=c.b.div.withConfig({displayName:"StyledComponents__Image",componentId:"sc-avd1hf-2"})(["min-height:12rem;width:100%;background:url(",");background-size:cover;"],(function(e){return e.src})),J=c.b.div.withConfig({displayName:"StyledComponents__LikesContainer",componentId:"sc-avd1hf-3"})(["position:absolute;top:0.75rem;right:0.75rem;"]),B=c.b.p.withConfig({displayName:"StyledComponents__Timestamp",componentId:"sc-avd1hf-4"})(["color:#7D7D7D;font-size:0.85rem;user-select:none;"]),H=c.b.p.withConfig({displayName:"StyledComponents__Username",componentId:"sc-avd1hf-5"})(["display:inline-block;font-weight:bold;font-size:14px;margin-top:1rem;cursor:pointer;max-width:16rem;user-select:none;&:hover{text-decoration:underline;}"]),R=c.b.p.withConfig({displayName:"StyledComponents__Description",componentId:"sc-avd1hf-6"})(["font-size:13px;overflow:hidden;width:100%;margin-top:1rem;display:-webkit-box;-webkit-line-clamp:3;-webkit-box-orient:vertical;line-height:1.5;height:3.75rem;"]),T=c.b.p.withConfig({displayName:"StyledComponents__CommentsText",componentId:"sc-avd1hf-7"})(["display:inline-block;margin-top:0.5rem;color:#7D7D7D;font-size:13px;cursor:pointer;user-select:none;&:hover{text-decoration:underline;}"]),W=function(e){var t=e.image,n=e.createdAt,r=e.likes,i=e.author,s=e.comments,a=e.text,c=Object(o.useState)(r),d=Object(C.a)(c,2),l=d[0],m=d[1];return Object(x.jsxs)(P,{children:[Object(x.jsx)(A,{src:t,alt:"image"}),Object(x.jsxs)(U,{children:[Object(x.jsx)(B,{children:Object(L.a)(new Date(n),new Date,{addSuffix:!0})}),Object(x.jsx)(J,{onClick:function(){return m((function(e){return e+1}))},children:Object(x.jsx)(q,{likes:l})}),Object(x.jsxs)(H,{children:["@",null===i||void 0===i?void 0:i.username]}),Object(x.jsx)(R,{children:a}),Object(x.jsxs)(T,{children:["Comments (",null===s||void 0===s?void 0:s.length,")"]})]})]})};W.defaultProps={image:"https://source.unsplash.com/user/erondu",createdAt:"1973-01-01T18:25:43.511Z",likes:0,username:"nouser",totalComments:0,description:"Lorem ipsum dolor ametLorem ipsum dolor ametLorem ipsum dolor ametLorem ipsum dolor ametLorem ipsum dolor ametLorem ipsum dolor ametLorem ipsum dolor ametLorem ipsum dolor ametLorem ipsum dolor ametLorem ipsum dolor amet"};var M=W,Z={xsm:480,sm:768,md:1024,lg:1300},G=function(e){return function(e){return"number"===typeof e&&!Number.isNaN(e)}(e)?"".concat(e,"px"):e},K=function(e){return function(e){return"@media only screen and (min-width: ".concat(G(e),")")}(Z&&Z[e]||e)},Q=c.b.div.withConfig({displayName:"StyledComponents__Container",componentId:"sc-aam9ui-0"})(["margin-top:1rem;display:grid;justify-content:center;align-items:center;grid-template-columns:1fr;grid-gap:1rem;","{grid-template-columns:repeat(2,1fr);}","{grid-template-columns:repeat(3,1fr);}","{grid-template-columns:repeat(4,1fr);}","{grid-template-columns:repeat(5,1fr);}"],K("xsm"),K("sm"),K("md"),K("lg")),V=function(e){var t=e.posts;return console.log(t),Object(x.jsx)(Q,{children:t.map((function(e,t){return Object(x.jsx)(M,Object(N.a)({},e),t)}))})},X=(n(56),n(43)),Y=n.n(X),$=c.b.div.withConfig({displayName:"StyledComponents__Root",componentId:"sc-jfsgpm-0"})(["height:calc(100vh - 3rem);width:100vw;position:relative;"]),ee=Object(c.b)(Y.a).withConfig({displayName:"StyledComponents__Spinner",componentId:"sc-jfsgpm-1"})(["z-index:100;position:absolute;left:50%;top:50%;transform:translate(-50%,-50%);"]),te=function(e){var t=e.type,n=void 0===t?"Circles":t,o=e.color,r=void 0===o?"#000":o;return Object(x.jsx)($,{children:Object(x.jsx)(ee,{type:n,color:r})})},ne=n(20),oe=n(25),re=n.n(oe);re.a.interceptors.response.use(null,(function(e){if(e.response&&401===e.response.status)return localStorage.getItem("user")&&localStorage.removeItem("user"),Promise.reject(e)}));var ie=function(e,t){t.req,t.res;var n=Object(ne.a)(t,["req","res"]),o=e.response,r=(o=void 0===o?{}:o).data,i=(r=void 0===r?{}:r).statusCode;return{error:e.toString(),statusCode:i,props:n}},se=function(e){var t=e.endpoint,n=void 0===t?"":t,o=e.settings,r=void 0===o?{}:o,i=e.method,s=void 0===i?"get":i,a=function(){var e=Object(w.a)(y.a.mark((function e(t){var n,o,r,i;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.url,o=t.req,t.res,r=Object(ne.a)(t,["url","req","res"]),e.next=3,re()(Object(N.a)({url:n,method:s,withCredentials:!0,headers:Object(N.a)({"Content-Type":"application/json"},o?o.headers:void 0)},r));case 3:return i=e.sent,e.abrupt("return",{data:i.data,statusCode:i.status});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return function(){var e=Object(w.a)(y.a.mark((function e(){var t,o,i,s,c,d,l,m,p,u=arguments;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=u.length>0&&void 0!==u[0]?u[0]:{},i=o.req,s=o.res,c=Object(ne.a)(o,["req","res"]),d=null!==(t="https://three-points.herokuapp.com/api")&&void 0!==t?t:"https://three-points.herokuapp.com/api",l="".concat(d,"/").concat(n),e.prev=3,m="function"===typeof(m=r)?r(Object(N.a)({req:i},c)):Object(N.a)(Object(N.a)({},m),c),e.next=8,a(Object(N.a)({url:l,req:i,res:s},m));case 8:return e.abrupt("return",e.sent);case 11:return e.prev=11,e.t0=e.catch(3),console.log(e.t0),p=ie(e.t0,Object(N.a)({req:i,res:s},c)),console.error("Error on request",p),e.abrupt("return",p);case 17:case"end":return e.stop()}}),e,null,[[3,11]])})));return function(){return e.apply(this,arguments)}}()()},ae=function(){var e=Object(w.a)(y.a.mark((function e(){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,se({endpoint:"posts"});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ce=function(e){var t=e.history,n=Object(o.useState)(""),r=Object(C.a)(n,2),i=r[0],s=r[1],a=Object(o.useState)([]),c=Object(C.a)(a,2),d=c[0],l=c[1],m=Object(o.useState)([]),p=Object(C.a)(m,2),u=p[0],b=p[1],h=Object(o.useState)(!0),f=Object(C.a)(h,2),g=f[0],j=f[1];Object(o.useEffect)((function(){j(!0);var e=JSON.parse(localStorage.getItem("user"));(null===e||void 0===e?void 0:e.id)||t.push("/login"),v(),j(!1)}),[t]);var v=function(){var e=Object(w.a)(y.a.mark((function e(){var t,n,o;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ae();case 2:if(t=e.sent,n=t.error,o=t.data,!n){e.next=8;break}return console.log(n),e.abrupt("return");case 8:l(o),b(o);case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(o.useEffect)((function(){if(i.length<3)b(d);else{var e=u.filter((function(e){var t,n;return(null===e||void 0===e||null===(t=e.text)||void 0===t?void 0:t.toLowerCase().includes(i.toLowerCase()))||(null===e||void 0===e||null===(n=e.author)||void 0===n?void 0:n.username.toLowerCase().includes(i.toLowerCase()))}));u.length>0&&e.length>0?b(e):b(d)}}),[i,u,d]),Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(I,{onSearch:function(e){var t=e.target;return s(t.value)}}),g?Object(x.jsx)(te,{}):Object(x.jsx)(V,{posts:u})]})},de=c.b.div.withConfig({displayName:"StyledComponents__Wrapper",componentId:"sc-1lck23k-0"})(["display:flex;padding:1rem;flex-direction:column;align-items:center;justify-content:center;"]),le=c.b.div.withConfig({displayName:"StyledComponents__Avatar",componentId:"sc-1lck23k-1"})(["background:url(",");background-size:contain;width:7rem;height:7rem;border-radius:50%;","{width:10rem;height:10rem;}"],(function(e){return e.src}),K("sm")),me=c.b.p.withConfig({displayName:"StyledComponents__Username",componentId:"sc-1lck23k-2"})(["text-align:center;font-weight:bold;margin-top:2rem;"]),pe=c.b.p.withConfig({displayName:"StyledComponents__Bio",componentId:"sc-1lck23k-3"})(["margin-top:2rem;text-align:center;max-width:20rem;","{max-width:25rem;}"],K("sm")),ue=c.b.button.withConfig({displayName:"StyledComponents__LogOut",componentId:"sc-1lck23k-4"})(["margin-top:0.5rem;padding:0.25rem 0.5rem;border:none;cursor:pointer;background:#d64b50;color:#FFF;border-radius:3px;transition:transform 0.2s ease-out;&:active{transform:scale(1.05);}"]),be=function(e){var t=e.avatar,n=e.username,o=e.bio,r=e.onLogout;return Object(x.jsxs)(de,{children:[Object(x.jsx)(le,{src:t}),Object(x.jsxs)(me,{children:["@",n]}),Object(x.jsx)(pe,{children:o}),Object(x.jsx)(ue,{onClick:r,children:"Log Out"})]})},he=function(e){var t=e.history,n=Object(o.useState)(null),r=Object(C.a)(n,2),i=r[0],s=r[1];Object(o.useEffect)((function(){var e=JSON.parse(localStorage.getItem("user"));(null===e||void 0===e?void 0:e.id)||t.push("/login"),s(e)}),[t]);return Object(x.jsx)(be,Object(N.a)({onLogout:function(){localStorage.getItem("user")&&(localStorage.removeItem("user"),t.push("/login"))}},i))},fe=c.b.form.withConfig({displayName:"StyledComponents__Form",componentId:"sc-14t08k0-0"})(["display:flex;flex-direction:column;width:100%;"]),ge=c.b.div.withConfig({displayName:"StyledComponents__FormInput",componentId:"sc-14t08k0-1"})(["display:flex;flex-direction:column;width:100%;"]),je=c.b.label.withConfig({displayName:"StyledComponents__Label",componentId:"sc-14t08k0-2"})(["margin:1rem 0;"]),xe=c.b.input.withConfig({displayName:"StyledComponents__Input",componentId:"sc-14t08k0-3"})(["height:2.5rem;border:1px solid #cfcfcf;border-radius:5px;padding:0.5rem;font-size:1rem;","{height:3rem;font-size:1.2rem;}"],K("sm")),ve=c.b.button.withConfig({displayName:"StyledComponents__Button",componentId:"sc-14t08k0-4"})(["margin-top:1.5rem;height:2.5rem;border:none;width:100%;background:#3283d2;color:#ffffff;border-radius:5px;cursor:pointer;transition:transform 0.2s;&:active{transform:scale(1.005);background:#3283D2BB;}&:disabled,&[disabled]{background:#3283d245;color:#efefef;cursor:auto;border:none;}"]),Oe=c.b.span.withConfig({displayName:"StyledComponents__Error",componentId:"sc-14t08k0-5"})(["border:1px solid rgba(180,45,67,0.5);border-radius:5px;padding:0.75rem;font-size:1rem;color:rgba(180,45,67,0.9);background:rgba(180,45,67,0.3);margin:1rem 0;"]),ye=c.b.h1.withConfig({displayName:"StyledComponents__H1",componentId:"sc-14t08k0-6"})([""]),we=function(e){var t=e.setUsername,n=e.setPassword,o=e.handleSubmit,r=e.isLoading,i=e.isDisabled,s=void 0===i||i,a=e.error;return Object(x.jsxs)(fe,{onSubmit:o,children:[a&&Object(x.jsx)(Oe,{children:a}),Object(x.jsx)(ye,{children:"Login"}),Object(x.jsxs)(ge,{children:[Object(x.jsx)(je,{htmlFor:"username",children:"Username"}),Object(x.jsx)(xe,{id:"username",type:"text",onChange:function(e){return t(e.target.value)}})]}),Object(x.jsxs)(ge,{children:[Object(x.jsx)(je,{htmlFor:"password",children:"Password"}),Object(x.jsx)(xe,{id:"password",type:"password",onChange:function(e){return n(e.target.value)}})]}),Object(x.jsx)(ve,{disabled:s,children:r?"Loading...":"Login"})]})},Ce=function(){var e=Object(w.a)(y.a.mark((function e(t){var n,o;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.username,o=t.password,e.abrupt("return",se({endpoint:"login",method:"post",settings:{data:{username:n,password:o}}}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),_e=c.b.div.withConfig({displayName:"Login__Root",componentId:"sc-rnhzxp-0"})(["height:calc(100vh - 6rem);width:100%;display:flex;flex-direction:column;justify-content:flex-start;align-content:center;margin:5rem auto;","{max-width:50vw;}"],K("sm")),Se=function(e){var t=e.history,n=Object(o.useState)(""),r=Object(C.a)(n,2),i=r[0],s=r[1],a=Object(o.useState)(""),c=Object(C.a)(a,2),d=c[0],l=c[1],m=Object(o.useState)(!1),p=Object(C.a)(m,2),u=p[0],b=p[1],h=Object(o.useState)(!0),f=Object(C.a)(h,2),g=f[0],j=f[1],v=Object(o.useState)(null),O=Object(C.a)(v,2),_=O[0],S=O[1];Object(o.useEffect)((function(){var e=JSON.parse(localStorage.getItem("user"));(null===e||void 0===e?void 0:e.id)&&t.push("/posts")}),[t]),Object(o.useEffect)((function(){0!==i.length&&0!==d.length?j(!1):j(!0)}),[i,d]);var k=function(){var e=Object(w.a)(y.a.mark((function e(n){var o,r,s,a;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),b(!0),S(null),o={username:i,password:d},e.prev=4,e.next=7,Ce(o);case 7:if(r=e.sent,s=r.error,a=r.data,!s){e.next=12;break}throw new Error("Invalid Username or Password");case 12:localStorage.setItem("user",JSON.stringify(a)),t.push("/posts"),e.next=19;break;case 16:e.prev=16,e.t0=e.catch(4),S(e.t0.message);case 19:return e.prev=19,b(!1),e.finish(19);case 22:case"end":return e.stop()}}),e,null,[[4,16,19,22]])})));return function(t){return e.apply(this,arguments)}}();return Object(x.jsx)(_e,{children:Object(x.jsx)(we,{isDisabled:g,setUsername:s,setPassword:l,handleSubmit:k,isLoading:u,error:_})})},ke=c.b.main.withConfig({displayName:"App__ContentContainer",componentId:"sc-wlvfca-0"})(["width:100%;padding:1rem;"]),Ie=function(){var e=Object(l.f)();return Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(v,{}),Object(x.jsx)(ke,{children:Object(x.jsxs)(l.c,{location:e,children:[Object(x.jsx)(l.a,{path:"/login",component:Se}),Object(x.jsx)(l.a,{path:"/posts",component:ce}),Object(x.jsx)(l.a,{path:"/profile",component:he}),Object(x.jsx)(l.a,{path:"/",exact:!0,component:ce})]},e.pathname)})]})};s.a.render(Object(x.jsx)(r.a.StrictMode,{children:Object(x.jsxs)(a.a,{children:[Object(x.jsx)(d,{}),Object(x.jsx)(Ie,{})]})}),document.getElementById("root"))}},[[93,1,2]]]);
//# sourceMappingURL=main.96edb99f.chunk.js.map